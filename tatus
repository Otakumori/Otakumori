[33m2c2a8f0[m[33m ([m[1;31morigin/main[m[33m, [m[1;31morigin/HEAD[m[33m)[m config runes
[33mb36cebe[m changes.
[33m3bc850d[m Coupons/admin management
[33m24643c1[m index
[33m1aa8c4e[m feat(admin): add Petal Shop manager (CRUD via API), support COUPON kind; purchase route issues CouponGrant when appropriate
[33m2e3164d[m feat(admin): add Appearance admin page and site-config API; feat(mini-games): daily boot gate + O-cube animation; adjust hub overlay sizing to prevent overflow
[33mf5ce2b2[m chore(api): standardize Problem+JSON + correlationId logging across petal-shop, mini-games, petals wallet, and collect routes
[33m24cbf41[m feat(mini-games): wire Petal Run/Memory/Rhythm clients to start session + submit score, display granted petals and balance
[33ma385ce5[m feat(apis): sanitize + rate-limit Soapstone POST with Problem+JSON; refactor Petal Store UI to use /api/petal-shop/catalog, /api/petals/wallet, /api/petal-shop/purchase
[33m0a1dfd2[m feat(petal-shop): add GET /api/petal-shop/catalog and POST /api/petal-shop/purchase with Zod, RL, atomic debit + inventory grant
[33m318f61d[m refactor(printify): migrate all imports to getPrintifyService(); fix implicit any; update health/sync/v1 routes to consolidated service
[33m296997f[m chore(printify): consolidate to app/lib/printify/service; migrate utils to service; remove deprecated lib/printifyClient.ts and utils/printifyAPI.js; update health check to use service.testConnection()
[33m44a24e2[m test(printify): make test accept either array response or production shape with data.products/items
[33m7ccb286[m fix(printify): lazy-init PrintifyService to avoid env checks at import time; route uses getPrintifyService() inside handler
[33md4d1409[m test(printify): update route test to expect production shape { ok, data: { products, pagination } } and keep auth header assertion
[33mbd40f0e[m chore(env,printify): standardize to import env from '@/env' across codebase; consolidate Printify route to use app/lib/printify/service; ensure route returns array for test compatibility
[33m80b30ee[m fix(printify route): return raw array and fetch inline using env.ts to match tests; avoid env.mjs validation and logger coupling
[33mfc634dd[m feat(petals): add wallet API; harden v1/petals/collect with Zod, RL, daily caps, and atomic ledger+balance updates; add basic logger util
[33m7a703e6[m feat(mini-games hub): add BootScreen, GameCubeHub, InputController, FaceLabel; gate /mini-games via boot; add stub game routes (petal-run/memory/rhythm) with dynamic clients
[33mbf42f5a[m feat(mini-games): add session/submit APIs with Zod validation, Problem+JSON, RL; implement creditPetals ledger+balance utils; add schemas and problem util
[33mfa26d4f[m docs(runbook): add SUPER_FIX.md, ECONOMY.md, APIS.md; chore(scripts): add scripts/check-env.ts with env.mjs validation
[33m1d4f0e3[m chore(config): merge CSP into next.config.mjs and remove CommonJS next.config.js to satisfy ESM lint/build
[33m1a06e27[m chore(security,a11y): add CSP via next.config.js (dev/prod split), align middleware; fix form field warnings by adding id/name/aria where missing across inputs/selects; preserve Stripe Elements integration and autocomplete
[33m7135e1e[m fix(supabase): use global Authorization header for Clerk JWT (supabase-js v2) instead of deprecated auth.setAuth
[33me460b67[m feat(csp,supabase): add Stripe endpoints to CSP; add Supabase client helpers for browser/server with Clerk token support
[33mec181ee[m docs(vercel): note Clerk preview setup (test keys + proxy URL)
[33m1cca782[m security(csp): allow Clerk custom domains and accounts subdomain in connect-src and frame-src; include telemetry domains; add apex domain
[33m971d1ec[m chore(ci): trigger Vercel redeploy after env update
[33m88f5391[m build(env): relax DIRECT_URL to optional in server env schema to avoid build failures when not set on Vercel; Prisma schema still uses DIRECT_URL if provided
[33me5865b2[m chore(sentry): rename client config to instrumentation-client.ts; add router transition hook; tune edge/server configs; normalize about page encoding
[33m26d9714[m build: fix Next build and env validation; wire missing imports and state; add Sentry perf configs and make plugin read env; ensure shop page uses getProduct; fix SWR usage and middleware NextResponse import
[33ma740b6f[m feat(sentry): enable performance monitoring for Next.js via client/server configs; fix minor type issues to keep build moving
[33m4daa5bc[m ci(vercel): set installCommand to 'pnpm install --no-frozen-lockfile' and use vercel-build script
[33m278c669[m chore(ci): trigger Vercel build after package.json BOM fix + Node 20 engines
[33mdaf5e4b[m build: remove UTF-8 BOM from package.json and pin engines.node=20.x for Vercel
[33m4c727c0[m feat(mini-games): add 'Request Interaction' button on Face 2; wire manual POST to mock API and set pending state; fix interaction polling cursor key; add audio volume pref wiring and lightweight toast IDs
[33m47c26c4[m feat(mini-games): Face 2 WS mock, pending queues, breadcrumbs, testids; add mock WS server; chore: remove pnpm workspace + lock and pin pnpm@9
[33me640cd1[m big yoshi
[33m024e07f[m Merge branch 'main' of https://github.com/Otakumori/Otakumori
[33m8b381ac[m Mini-games,Gamecube update
[33m629f9d7[m Fixes
[33mebcae91[m Implement Rune System: Add new rune definitions, configurations, and admin routes for managing runes and rewards; enhance API with Clerk webhook handling and petal collection logic.
