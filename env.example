# === Core Application ===
# Environment: development, test, or production
NODE_ENV=development
# Database connection string (PostgreSQL via Neon)
# REQUIRED: Must be set to a valid PostgreSQL URL (cannot be empty in production)
# Get from: Neon Dashboard > Your Project > Connection String
DATABASE_URL=
# Direct database connection (bypasses connection pooling)
DIRECT_URL=
# Internal API authentication key
API_KEY=
# Secret for cron job authentication
CRON_SECRET=
# Salt for petal economy hashing (optional)
PETAL_SALT=

# === Stripe (REQUIRED for checkout) ===
# Stripe secret key from Stripe Dashboard > Developers > API keys
STRIPE_SECRET_KEY=
# Stripe publishable key (public, safe to expose)
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=
# Webhook secret for verifying Stripe webhook signatures
STRIPE_WEBHOOK_SECRET=
CHECKOUT_SUCCESS_URL=https://www.otaku-mori.com/success
CHECKOUT_CANCEL_URL=https://www.otaku-mori.com/cart

# === EasyPost ===
EASYPOST_API_KEY=
EASYPOST_WEBHOOK_SECRET=
DEFAULT_SHIP_FROM_NAME=Otaku-mori
DEFAULT_SHIP_FROM_STREET=123 Sakura St
DEFAULT_SHIP_FROM_CITY=Brooklyn
DEFAULT_SHIP_FROM_STATE=NY
DEFAULT_SHIP_FROM_ZIP=11201
DEFAULT_SHIP_FROM_COUNTRY=US

# === Resend ===
RESEND_API_KEY=
EMAIL_FROM=no-reply@otaku-mori.com

# === Sanity ===
SANITY_PROJECT_ID=
SANITY_DATASET=production
SANITY_API_READ_TOKEN=
SANITY_WEBHOOK_SECRET=

# === Algolia (site-wide search only) ===
NEXT_PUBLIC_ALGOLIA_APP_ID=
ALGOLIA_ADMIN_API_KEY=
ALGOLIA_INDEX_BLOG=om_blog
ALGOLIA_INDEX_GAMES=om_games
ALGOLIA_INDEX_PAGES=om_pages

# === Redis / Idempotency ===
UPSTASH_REDIS_REST_URL=
UPSTASH_REDIS_REST_TOKEN=
IDEMPOTENCY_TTL_SECONDS=86400
PETALS_DAILY_CAP=500
RATE_LIMIT_COLLECT_PER_MINUTE=30
RATE_LIMIT_SUBMIT_PER_MINUTE=10

# === Clerk Authentication (REQUIRED for user accounts) ===
# Clerk secret key from Clerk Dashboard > API Keys
CLERK_SECRET_KEY=
# Encryption key for Clerk session data (optional)
CLERK_ENCRYPTION_KEY=
# Webhook secret for Clerk webhook verification (optional)
CLERK_WEBHOOK_SECRET=
# Clerk publishable key (public, safe to expose)
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=
NEXT_PUBLIC_CLERK_SIGN_IN_URL=/sign-in
NEXT_PUBLIC_CLERK_SIGN_UP_URL=/sign-up
# Proxy URL for Clerk in production (optional)
NEXT_PUBLIC_CLERK_PROXY_URL=

# === Printify (REQUIRED for shop products) ===
# Printify API key from Printify Dashboard > API
PRINTIFY_API_KEY=
# Printify shop ID from Printify Dashboard > Shops
PRINTIFY_SHOP_ID=
# Printify API base URL (default: https://api.printify.com/v1)
PRINTIFY_API_URL=https://api.printify.com/v1/
# Webhook secret for Printify webhook verification (optional)
PRINTIFY_WEBHOOK_SECRET=

# === Vercel Blob Storage ===
# Get from: Vercel Console → Storage → Blob → Create Token (Read-Write)
BLOB_READ_WRITE_TOKEN=
# Public base URL for your Vercel Blob storage (e.g., https://<project>-<account>.public.blob.vercel-storage.com)
BLOB_PUBLIC_BASE_URL=
# Optional: Namespace prefix for blob keys (default: "om")
BLOB_BUCKET_PREFIX=om

# === Game/Economy Security ===
GAME_HMAC_SECRET=your_32_byte_base64_secret_here

# === Analytics (Optional) ===
NEXT_PUBLIC_POSTHOG_KEY=
NEXT_PUBLIC_POSTHOG_HOST=https://us.posthog.com
SENTRY_DSN=

# === Anti-bot (Optional) ===
NEXT_PUBLIC_TURNSTILE_SITE_KEY=
TURNSTILE_SECRET_KEY=

# === Feature Flags ===
NEXT_PUBLIC_FEATURE_PETALS=true
NEXT_PUBLIC_FEATURE_GAMES=true
NEXT_PUBLIC_FEATURE_GA_ENABLED=true
NEXT_PUBLIC_DAILY_PETAL_LIMIT=500
FEATURE_ADULT_ZONE=false
FEATURE_GATED_COSMETICS=false
FEATURE_AVATARS=true
FEATURE_AVATAR_STYLIZED_SHADERS=true

# === Petal System Configuration ===
# Override seasonal petal color (optional, defaults to seasonal auto-detection)
# Format: Hex color code (e.g., #FFC0CB for pink)
# Seasons: Spring=#FFC0CB (pink), Summer=#90EE90 (green), Fall=#FFA500 (orange), Winter=#E0E0E0 (white)
# NEXT_PUBLIC_PETAL_COLOR_OVERRIDE=#FFC0CB

# === Phase 1 Feature Flags (Safe Mode) ===
NEXT_PUBLIC_FEATURE_HERO=1
NEXT_PUBLIC_FEATURE_PETALS_INTERACTIVE=1
# Shop section on homepage (set to "1" to enable, "0" to disable)
NEXT_PUBLIC_FEATURE_SHOP=1
NEXT_PUBLIC_FEATURE_MINIGAMES=0
NEXT_PUBLIC_FEATURE_BLOG=0
NEXT_PUBLIC_FEATURE_SOAPSTONES=0
NEXT_PUBLIC_LIVE_DATA=0
NEXT_PUBLIC_PROBE_MODE=1

# === Storage/CDN (choose your configured one) ===
CLOUDINARY_CLOUD_NAME=
CLOUDINARY_API_KEY=
CLOUDINARY_API_SECRET=
# or S3:
S3_ACCESS_KEY_ID=
S3_SECRET_ACCESS_KEY=
S3_BUCKET=
S3_REGION=

# === Gated Content ===
ADULTS_STORAGE_INDEX_URL=

# === NSFW Policy Override (Server-Side) ===
# Set to "on" to globally allow NSFW content (for internal testing only)
# Default: "off" - requires age verification via cookie or Clerk adultVerified metadata
NSFW_GLOBAL=off

# === Site URLs ===
NEXT_PUBLIC_SITE_URL=https://www.otaku-mori.com
NEXT_PUBLIC_APP_URL=https://www.otaku-mori.com
NEXT_PUBLIC_CANONICAL_ORIGIN=https://www.otaku-mori.com

# === Supabase ===
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=

# === Sentry ===
NEXT_PUBLIC_SENTRY_DSN=
SENTRY_SKIP_AUTO_RELEASE=false
SENTRY_UPLOAD_SOURCE_MAPS=true
SENTRY_IGNORE_API_RESOLUTION_ERROR=false

# === OpenTelemetry ===
OTEL_SDK_DISABLED=false

# === Inngest (Background Job Processing - Optional) ===
# Event key - Used by the client to send events to Inngest
# Get from: Vercel Integration or Inngest Dashboard > Keys > Event Key
# Required if using Printify product sync or other Inngest functions
INNGEST_EVENT_KEY=

# Signing key - Used to verify webhook signatures from Inngest
# Get from: Vercel Integration or Inngest Dashboard > Keys > Signing Key
INNGEST_SIGNING_KEY=

# Serve URL - Where Inngest functions are served
# Local: http://localhost:8288
# Production: https://otaku-mori.com/api/inngest
INNGEST_SERVE_URL=

# Enable probe mode for development
INNGEST_PROBE=on

# === WebSocket (Community Features) ===
NEXT_PUBLIC_ENABLE_MOCK_COMMUNITY_WS=true
NEXT_PUBLIC_COMMUNITY_WS_URL=ws://localhost:8787/ws

# === Environment Detection ===
NEXT_PUBLIC_APP_ENV=development

# === Feature Flags (Optional) ===
NEXT_PUBLIC_FLAGS_PUBLIC_KEY=

# === Google Analytics ===
NEXT_PUBLIC_GA_MEASUREMENT_ID=

# === Vercel ===
VERCEL_URL=
VERCEL_ENVIRONMENT=development
NEXT_PUBLIC_VERCEL_ENVIRONMENT=development